#include <stdio.h>
#include "motor_data.h"
#include "search_equipment.h"

 /* power, current, 380V, cosφ, eff%,  Mп/Мн, Ммах/Мн, Iп/Iн */
static const Motor MOTORS_DATA[] = {
    {0.37, 1.30, 380, 0.70, 62.0, 1.9, 2.0, 4.7},
    {0.55, 1.80, 380, 0.72, 65.0, 1.9, 2.1, 4.7},
    {0.75, 2.29, 380, 0.73, 69.0, 2.0, 2.1, 5.3},
    {1.1,  3.18, 380, 0.74, 72.0, 2.0, 2.1, 5.5},
    {1.5,  4.00, 380, 0.75, 76.0, 2.0, 2.1, 5.5},
    {2.2,  5.60, 380, 0.76, 79.0, 2.1, 2.1, 6.5},
    {3.0,  7.40, 380, 0.76, 81.0, 2.1, 2.1, 6.5},
    {4.0,  9.75, 380, 0.76, 82.0, 2.1, 2.1, 6.5},
    {5.5,  12.9, 380, 0.77, 84.0, 2.1, 2.1, 6.5},
    {7.5,  17.2, 380, 0.77, 86.0, 2.0, 2.1, 6.5},
    {11.0, 24.5, 380, 0.78, 87.5, 2.0, 2.1, 6.5},
    {15.0, 31.6, 380, 0.81, 89.0, 2.0, 2.1, 7.0},
    {18.5, 38.6, 380, 0.81, 90.0, 2.1, 2.1, 7.0},
    {22.0, 44.7, 380, 0.84, 91.5, 2.0, 2.1, 7.0},
    {30.0, 59.3, 380, 0.85, 92.0, 2.1, 2.1, 7.0},
    {37.0, 71.0, 380, 0.86, 92.5, 2.1, 2.1, 7.0},
    {45.0, 86.0, 380, 0.86, 92.5, 2.1, 2.1, 7.0},
    {55.0, 104.0, 380, 0.86, 92.8, 2.1, 2.1, 7.0},
    {75.0, 142.0, 380, 0.86, 93.5, 2.0, 2.1, 6.7},
    {90.0, 169.0, 380, 0.86, 93.8, 2.0, 2.1, 6.7},
    {110.0, 207.0, 380, 0.86, 94.0, 2.0, 2.1, 6.7},
    {132.0, 245.0, 380, 0.87, 94.2, 2.0, 2.1, 6.7},
    {160.0, 292.0, 380, 0.88, 94.5, 1.9, 2.0, 6.7},
    {200.0, 365.0, 380, 0.88, 94.5, 1.9, 2.0, 6.7},
    {250.0, 457.0, 380, 0.88, 94.5, 1.9, 2.0, 6.7}
};

int motor_get_count(void) {
    return sizeof(MOTORS_DATA) / sizeof(MOTORS_DATA[0]);
};

const Motor* motor_get_by_power(float power_kw) {
    int size = motor_get_count();

    const Motor* motor = search_motor_by_parameter(MOTORS_DATA, size, FIND_BY_POWER, power_kw);

    if (motor) {
        return motor;
    }
    else{
        printf("!!!!!!!!!!!!!!!!\nОшибка поиска мотора по мощности. \n!!!!!!!!!!!!!!!!\n");
        printf("Взято значение по умолчанию. \n\n");
        
        return &MOTORS_DATA[0];
    };
};

const Motor* motor_get_by_current(float current_a) {
    return &MOTORS_DATA[0];
};